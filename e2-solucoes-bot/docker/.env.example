# E2 Soluções Bot - Environment Variables
# Copy this file to .env and fill in your actual credentials
# NEVER commit .env to version control!

# ============================================================================
# OpenAI API (para embeddings RAG)
# ============================================================================
# Obter em: https://platform.openai.com/api-keys
# Custo estimado: $0.10 inicial + $0.01/mês para 1000 queries
OPENAI_API_KEY=sk-proj-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ============================================================================
# Supabase (PostgreSQL com pgvector)
# ============================================================================
# Obter em: https://supabase.com/dashboard/project/_/settings/api

# URL do projeto Supabase
SUPABASE_URL=https://XXXXXXXXXXXXXXXX.supabase.co

# Service Role Key (admin, para ingest script)
# ATENÇÃO: Nunca expor publicamente! Usa no backend apenas.
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Anon Key (público, para frontend)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ============================================================================
# n8n Workflow Automation
# ============================================================================
# Host onde n8n está rodando
N8N_HOST=localhost:5678

# Credenciais para autenticação básica (produção)
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD

# ============================================================================
# Anthropic Claude API (para AI Agent)
# ============================================================================
# Obter em: https://console.anthropic.com/account/keys
ANTHROPIC_API_KEY=sk-ant-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ============================================================================
# Evolution API (WhatsApp Business)
# ============================================================================
# URL da instância Evolution API
EVOLUTION_API_URL=https://evolution-api.seudominio.com.br

# API Key global da Evolution API
EVOLUTION_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Nome da instância WhatsApp
EVOLUTION_INSTANCE_NAME=e2-solucoes-bot

# ============================================================================
# Google Services (Calendar + Drive)
# ============================================================================
# Service Account JSON (base64 encoded ou path)
# Obter em: https://console.cloud.google.com/iam-admin/serviceaccounts
GOOGLE_SERVICE_ACCOUNT_EMAIL=e2-bot@projeto-XXXXX.iam.gserviceaccount.com
GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n-----END PRIVATE KEY-----\n"

# Google Calendar ID para agendamentos
GOOGLE_CALENDAR_ID=primary

# ============================================================================
# RD Station CRM
# ============================================================================
# Obter em: https://appstore.rdstation.com/pt-BR/publisher/api

# Client ID e Secret do OAuth2
RDSTATION_CLIENT_ID=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
RDSTATION_CLIENT_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Access Token (obtido via OAuth flow)
RDSTATION_ACCESS_TOKEN=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Refresh Token (para renovação automática)
RDSTATION_REFRESH_TOKEN=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Webhook Secret (para validar webhooks recebidos)
RDSTATION_WEBHOOK_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ============================================================================
# Discord Notifications
# ============================================================================
# Criar webhook em: Canal → Configurações → Integrações → Webhooks
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/XXXXXXXXXXXXXXXXXX/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Canal para notificações comerciais
DISCORD_CHANNEL_COMERCIAL=comercial

# ============================================================================
# Email / SMTP (Gmail)
# ============================================================================
# Para Gmail: usar App Password (não senha da conta)
# Gerar em: https://myaccount.google.com/apppasswords

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=bot@e2solucoes.com.br
SMTP_PASSWORD=XXXX XXXX XXXX XXXX

# Email remetente
EMAIL_FROM=E2 Soluções Bot <bot@e2solucoes.com.br>

# Email da equipe comercial (recebe notificações)
EMAIL_COMERCIAL=comercial@e2solucoes.com.br

# ============================================================================
# Configurações do Bot
# ============================================================================

# Horário comercial (para agendamento)
WORKING_HOURS_START=08:00
WORKING_HOURS_END=18:00
LUNCH_BREAK_START=12:00
LUNCH_BREAK_END=13:00

# Duração padrão de visita técnica (minutos)
APPOINTMENT_DURATION=90

# Buffer entre visitas (minutos)
APPOINTMENT_BUFFER=30

# Dias disponíveis para agendamento (à frente)
APPOINTMENT_DAYS_AHEAD=14

# Threshold de similaridade RAG (0.0 - 1.0)
RAG_SIMILARITY_THRESHOLD=0.75

# Quantidade de resultados RAG
RAG_MATCH_COUNT=5

# ============================================================================
# PostgreSQL Local (se usando Docker local ao invés de Supabase)
# ============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=e2_bot
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD

# ============================================================================
# Redis (cache e sessões)
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD

# ============================================================================
# Desenvolvimento / Debug
# ============================================================================
NODE_ENV=development
DEBUG=false
LOG_LEVEL=info

# ============================================================================
# Produção (Traefik SSL)
# ============================================================================
# Domínio para Let's Encrypt
TRAEFIK_ACME_EMAIL=admin@e2solucoes.com.br
N8N_DOMAIN=n8n.e2solucoes.com.br
EVOLUTION_DOMAIN=whatsapp.e2solucoes.com.br

# ============================================================================
# INSTRUÇÕES DE USO
# ============================================================================
#
# 1. Copie este arquivo:
#    cp .env.example .env
#
# 2. Preencha as credenciais reais em .env
#
# 3. NUNCA commite .env no git!
#    Já está no .gitignore
#
# 4. Para validar configuração:
#    ./scripts/health-check.sh
#
# 5. Credenciais mínimas para Sprint 1.1:
#    - OPENAI_API_KEY (obrigatório)
#    - SUPABASE_URL (obrigatório)
#    - SUPABASE_SERVICE_KEY (obrigatório)
#    - N8N_HOST (default: localhost:5678)
#
# 6. Outras credenciais serão necessárias nos próximos sprints
#
# ============================================================================
